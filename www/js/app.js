function Display(){function t(){document.getElementById("loginError").style.display="none",document.getElementById("games").style.display="none",document.getElementById("loading").style.display="none",document.getElementById("loginButton").style.display="block"}function n(t,o,y,s,c){l()||e(o),setTimeout(function(){i(o,c),d(t,u,m,s,y),n(t,o,y,s,c)},20)}function e(t,n){if(t)return u=t,void(m=n||t);o()}function o(){u=!1,m=!1}function l(){return!(!1===u&&!1===m)}function i(t,n){n?y(t):s(t)}function d(t,n,e,o,l){t.style.textShadow=n+"px "+e+"px "+o+"px "+l}function y(t){u==t&&m<t?m++:m==t&&u>-t?u--:u==-t&&m>-t?m--:m==-t&&u<t&&u++}function s(t){u==t&&m>-t?m--:m==-t&&u>-t?u--:u==-t&&m<t?m++:m==t&&u<t&&u++}var u=!1,m=!1;document.getElementById("title");return this.games=function(){document.getElementById("loginError").style.display="none",document.getElementById("loginButton").style.display="none",document.getElementById("loading").style.display="none",document.getElementById("games").style.display="block"},this.loading=function(){document.getElementById("loginError").style.display="none",document.getElementById("loginButton").style.display="none",document.getElementById("games").style.display="none",document.getElementById("loading").style.display="block"},this.loginButton=t,this.rotateTextShadow=n,this.loginError=function(){t(),document.getElementById("loginError").style.display="block"},this}
function Events(){return this.checkLogin=function(){display.loading(),login.checkFbLogin()},this}
var ajax,display,login,home,user={};
function Home(){return this.goTo=function(e){window.location.href=e+"?sessionToken="+user.accessToken},display.rotateTextShadow(document.getElementById("title"),4,"#000",7,!1),login.handleLogin(),this}
function Login(){function e(e){e&&ajax.get("https://graph.facebook.com/v2.10/oauth/access_token?client_id=309691342772623&redirect_uri=http://unusualdev.com/&client_secret=13e58f0492789ec1cfc6b44c87e9bd88&code="+e,function(e){t(e.access_token,!0,display.games)},n)}function t(e,t,r){user.accessToken=e,ajax.get("https://graph.facebook.com/me?fields=first_name,name,email,gender,picture,birthday,age_range,hometown,locale,location&access_token="+user.accessToken,function(e){o(e,c),t&&(document.getElementById("userPicture").style.backgroundImage="url('"+e.picture.data.url+"')",document.getElementById("userPicture").style.display="block"),r&&r()},n)}function n(e){document.cookie="accessToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC",window.location.href="/?error=true"}function o(e,t){user.firstName=e.first_name,user.name=e.name,user.fbId=e.id,user.picture=e.picture.data.url,t&&t(user)}function c(e){var t="";for(key in e)t+=key+"="+e[key]+";";document.cookie=t}function r(){var e=document.cookie.match(new RegExp("accessToken=([^;]+)"));return!(!e||!e[1])&&e[1]}function i(e){return a.searchParams.get(e)}var a=new URL(window.location.href);return this.checkFbLogin=function(){window.location.href="https://www.facebook.com/v2.10/dialog/oauth?client_id=309691342772623&redirect_uri=http://unusualdev.com/"},this.getUserInfo=function(){return user},this.handleLogin=function(){var n=r(),o=i("code"),c="true"===i("error");n?t(n,!0,display.games):o?e(o):c?display.loginError():display.loginButton()},this.logout=function(){document.cookie="accessToken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",user={},window.location.href="/"},this.getUrlParam=i,this.fetchUserInfo=t,this}
document.addEventListener("DOMContentLoaded",function(e){ajax=Ajax(),display=Display(),login=Login(),events=Events(),home=Home()});